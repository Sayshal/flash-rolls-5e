/* Drag Handle Styles */
#flash-rolls-menu .drag-handle {
  position: absolute;
  top: 0;
  left: 0;
  right: 0;
  height: 1.2em;
  background: var(--fr5e-menu-background, rgba(20, 20, 20, 0.9));
  border: 1px solid var(--fr5e-menu-background, rgba(20, 20, 20, 0.9));
  color: var(--fr5e-text-color);
  border-bottom: none;
  border-top-left-radius: 4px;
  border-top-right-radius: 4px;
  cursor: grab;
  display: flex;
  align-items: center;
  justify-content: center;
  pointer-events: all;
  z-index: 101;
}

#flash-rolls-menu .drag-handle i {
  opacity: 0.5;
  font-size: 0.8em;
}

#flash-rolls-menu .drag-handle:hover {
  opacity: 0.8;
}

#flash-rolls-menu .drag-handle:hover i {
  opacity: 0.8;
}

/* Horizontal Layout Drag Handle - Commented out as it was empty in original */
#flash-rolls-menu[data-layout="horizontal"] .drag-handle {
  /* Placeholder for future horizontal drag handle styles */
}

/* Dragging State */
#flash-rolls-menu.dragging {
  transition: none !important;
  --flash-rolls-menu-offset: 0px;
}

#flash-rolls-menu.dragging .drag-handle {
  cursor: grabbing;
}

/* Actor Drag Wrapper */
.actor-drag-wrapper {
  align-items: flex-start;
  display: flex;
  flex-direction: row;
  flex-wrap: wrap;
  margin: 0;
  padding: 0;
  gap: 6px;
  height: auto;
  width: 100%;
}

.actor-drag-wrapper[draggable="true"] {
  cursor: grab;
  transition: opacity 0.2s ease, transform 0.2s ease;
}

.actor-drag-wrapper[draggable="true"]:hover {
  transform: translateX(-2px);
}

.actor-drag-wrapper.dragging {
  opacity: 0.6;
  transform: scale(0.95);
  cursor: grabbing;
  z-index: 1000;
}

/* Drag Remove Zone */
.actor-drag-wrapper.drag-remove-zone {
  opacity: 0.3;
  animation: drag-remove-pulse 1s infinite;
  border: 2px dashed var(--color-border-highlight-alt);
  border-radius: 3px;
}

@keyframes drag-remove-pulse {
  0% {
    opacity: 0.3;
    border-color: var(--color-border-highlight-alt);
  }
  50% {
    opacity: 0.1;
    border-color: var(--color-warm-2);
  }
  100% {
    opacity: 0.3;
    border-color: var(--color-border-highlight-alt);
  }
}

/* Dragged Wrapper Styling when Outside Menu Hierarchy */
.actor-drag-wrapper.dragging {
  background: var(--fr5e-menu-background, rgba(20, 20, 20, 0.9));
  border-radius: 3px;
  border: 1px solid var(--color-warm-2);
  color: var(--color-text-light-highlight, var(--color-light-1));
  font-size: 0.75rem;
  min-width: 11rem;
  max-width: 11rem;
  pointer-events: none;
  box-shadow: 0 4px 8px rgba(0, 0, 0, 0.3);
  padding: 4px;
}

/* Drag Wrapper for Body */
body > .actor.drag-wrapper {
  background-color: var(--fr5e-menu-background, rgba(20, 20, 20, 0.9));
}

body > .actor.drag-wrapper .actor-data {
  display: none !important;
}

/* Hide Actor Data when Dragging */
.actor.drag-wrapper.dragging .actor-data,
.actor-drag-wrapper.dragging .actor-data {
  display: none !important;
}

/* Drag Ghost Image Styling */
#flash-rolls-menu ul.actors > li.actor-list > ul > li.actor[draggable="true"]:active {
  cursor: grabbing;
}

/* Drop Zone Styling */
#flash-rolls-menu .actor-list.drag-over,
#flash-rolls-menu ul.actors.drag-over {
  background-color: rgba(255,255,255, 0.9);
  border-radius: 4px;
  position: relative;
  pointer-events: auto;
}

/* Drop Zone Feedback Animation */
#flash-rolls-menu .actor-list.drag-over,
#flash-rolls-menu ul.actors.drag-over {
  animation: drop-zone-pulse 1.5s infinite ease-in-out;
}

@keyframes drop-zone-pulse {
  0% {
    background-color: rgba(255,255,255, 0.1);
  }
  50% {
    background-color: rgba(255,255,255, 0.25);
  }
  100% {
    background-color: rgba(255,255,255, 0.1);
  }
}

/* Ensure Actor List Elements can Receive Drop Events */
#flash-rolls-menu .actor-list,
#flash-rolls-menu ul.actors {
  pointer-events: auto;
}

/* Drop Zone Messages */
#flash-rolls-menu .actor-list.drag-over::before {
  content: "Drop Actor Here";
  position: absolute;
  display: block;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%);
  background: var(--fr5e-menu-background);
  color: var(--fr5e-text-color);
  padding: 8px 8px;
  font-weight: bold;
  font-size: 0.8rem;
  z-index: 200;
  pointer-events: none;
  width: 6rem;
  text-align: center;
}

#flash-rolls-menu.compact .actor-list.drag-over::before {
  content: "Drag & Drop";
  width: 3.6rem;
  padding: 8px 4px;
}

/* Prevent Multiple Drop Messages from Nested Elements */
#flash-rolls-menu .actor-list.drag-over ul.drag-over::before,
#flash-rolls-menu ul.actors.drag-over li.drag-over::before {
  display: none;
}

/* Empty Actor List Specific Drop Styling */
#flash-rolls-menu .actor-list ul:empty.drag-over {
  min-height: 60px;
  display: flex;
  align-items: center;
  justify-content: center;
}

/* Group Actor Base Styles */
#flash-rolls-menu .actor-group {
  /* Group selection states */
}

#flash-rolls-menu .actor-group[data-group-selected=true] {
  background: transparent;
}

#flash-rolls-menu .actor-group .group-members {
  list-style: none;
}

#flash-rolls-menu .actor-group[data-group-selected=true] > .actor-img {
  background: var(--color-highlights-50, var(--color-warm-2));
}

#flash-rolls-menu .actor-group .group-members .actor {
  margin: 0;
  padding: 0.25rem;
  background: transparent;
}

#flash-rolls-menu .actor-group .group-members .actor:hover {
  background: rgba(255, 255, 255, 0.05);
}

#flash-rolls-menu .actor-group .group-expand-btn {
  background: none;
  border: none;
  color: inherit;
  cursor: pointer;
  padding: 0.15rem;
  margin-left: 0.1rem;
  border-radius: 2px;
  transition: background-color 0.2s ease;
}

#flash-rolls-menu .actor-group .group-expand-btn:hover {
  background-color: var(--fr5e-secondary-bg-5);
  opacity: 0.7;
}

/* Additional Group Actor Styles for Non-compact modes would go here */
/* These are quite extensive in the original file and follow similar patterns */